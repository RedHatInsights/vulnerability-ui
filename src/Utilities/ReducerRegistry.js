import { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/Registry';
import { notificationsMiddleware } from '@redhat-cloud-services/frontend-components-notifications';
import MiddlewareListener from '@redhat-cloud-services/frontend-components-utilities/files/MiddlewareListener';
import promiseMiddleware from 'redux-promise-middleware';

export const middlewareListener = new MiddlewareListener();

const registry = getRegistry({}, [
    promiseMiddleware(),
    notificationsMiddleware({
        errorTitleKey: 'title',
        errorDescriptionKey: 'detail'
    }),
    middlewareListener.getMiddleware()
]);

export default {
    getStore: () => registry.getStore(),
    register: newReducers => {
        registry.register(newReducers);
    }
};
