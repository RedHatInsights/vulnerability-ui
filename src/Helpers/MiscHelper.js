import saveAs from 'file-saver';
import propTypes from 'prop-types';

/* global require */

export function processDate(dateString) {
    let date = new Date(dateString);
    let dateFormat = require('dateformat');
    return (date instanceof Date && !isNaN(date) && dateFormat(date, 'mmmm dS, yyyy')) || 'N/A';
}

export function processCvssScore(score) {
    return score || 'N/A';
}

export function truncate(str, max) {
    return str.length > max ? str.substr(0, max - 1) + 'â€¦' : str;
}

export const dataShape = propTypes.shape({
    data: propTypes.oneOfType([propTypes.object, propTypes.array]),
    meta: propTypes.object,
    isLoading: propTypes.bool
});

export function triggerFileDownload(data) {
    let blob = new Blob([data], { type: 'text/plain;charset=utf-8' });
    saveAs(blob, new Date().toISOString() + '.txt');
}
