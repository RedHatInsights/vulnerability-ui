import { Card, CardBody, Page } from '@patternfly/react-core';
import { Main } from '@red-hat-insights/insights-frontend-components';
import propTypes from 'prop-types';
import React from 'react';
import { connect } from 'react-redux';
import { withRouter } from 'react-router-dom';
import { dispatchAction } from '../../../Helpers/Dispatcher';
import { setHeader } from '../../../Store/Actions/Actions';
import { paths } from '../../../Utilities/Routes';
import CVEs from '../CVEs/CVEs';
import VulnerabilityHeader from '../VulnerabilityHeader/VulnerabilityHeader';
import './VulnerabilitiesCVEs.scss';

class VulnerabilitiesCVEs extends React.Component {
    constructor(props) {
        super(props);
    }

    componentDidMount() {
        this.props.setHeader({
            breadcrumbs: [{ title: 'Vulnerability', to: paths.vulnerabilities }, { title: 'CVEs', isActive: true }]
        });
    }

    render() {
        return (
            <Page>
                <VulnerabilityHeader />
                <Main>
                    <Card>
                        <CardBody>
                            <CVEs />
                        </CardBody>
                    </Card>
                </Main>
            </Page>
        );
    }
}

VulnerabilitiesCVEs.propTypes = {
    dataMapper: propTypes.func,
    fetchResource: propTypes.func,
    setHeader: propTypes.func,
    header: propTypes.array,
    showAllCheckbox: propTypes.bool,
    entity: propTypes.string,
    emptyStore: propTypes.func,
    defaultSort: propTypes.any
};

const mapDispatchToProps = () => {
    return {
        setHeader: header => dispatchAction(setHeader(header))
    };
};

export default withRouter(
    connect(
        null,
        mapDispatchToProps
    )(VulnerabilitiesCVEs)
);
