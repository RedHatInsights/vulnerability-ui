import {
    EmptyStateNoCVEs,
    EmptyStateNoSystems,
    EmptyStateExcludedSystem
} from './EmptyStates'
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import TestWrapper from '../../../Utilities/TestWrapper';
import messages from '../../../Messages'

describe('Empty states', () => {
    it('should render EmptyStateNoCVEs', () => {
        const { asFragment } = render(<TestWrapper><EmptyStateNoCVEs secondParagraph={messages.emptyStateThereShouldBeCVEs}/></TestWrapper>);
        expect(asFragment()).toMatchSnapshot();

        expect(screen.getByTestId('prod-sec-link')).toBeTruthy();
    })

    it('should render EmptyStateNoSystems', () => {
        const { asFragment } = render(<TestWrapper><EmptyStateNoSystems /></TestWrapper>);
        expect(asFragment()).toMatchSnapshot();
    })

    it('should render EmptyStateExcludedSystem', () => {
        const mockAction = jest.fn();
        const { asFragment } = render(<TestWrapper><EmptyStateExcludedSystem buttonAction={mockAction} /></TestWrapper>);
        expect(asFragment()).toMatchSnapshot();

        userEvent.click(screen.getByTestId('empty-state-button-action'));
        expect(mockAction).toHaveBeenCalled();
    })
})
