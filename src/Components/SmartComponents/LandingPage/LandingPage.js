import React, { Fragment, useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { useIntl } from 'react-intl';
import { Main } from '@redhat-cloud-services/frontend-components';
import Header from '../../PresentationalComponents/Header/Header';
import { togglePopup } from '../../../Store/Actions/Actions';
import PopUp from '../../PresentationalComponents/PopUp/PopUp';
import messages from '../../../Messages';
import CVEs from '../CVEs/CVEs';

const LandingPage = () => {
    const dispatch = useDispatch();
    const intl = useIntl();

    const unsupported = useSelector(
        ({ CVEsStore }) =>  CVEsStore.unsupported
    );

    useEffect(() => {
        if (unsupported) {
            dispatch(togglePopup('landing', true));
        }
    }, [unsupported, dispatch]);

    return (
        <Fragment>
            <Header title={intl.formatMessage(messages.cvesHeader)} showBreadcrumb={false} />
            <Main>
                <CVEs/>
                <PopUp page="landing"/>
            </Main>
        </Fragment>
    );
};

export default LandingPage;
