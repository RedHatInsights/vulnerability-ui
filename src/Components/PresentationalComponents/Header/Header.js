import React from 'react';
import propTypes from 'prop-types';
import { PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components/PageHeader';
import Breadcrumb from './Breadcrumb';
import messages from '../../../Messages';
import { intl } from '../../../Utilities/IntlProvider';
import { Split, SplitItem } from '@patternfly/react-core';
import BaseDropdown from '../../PresentationalComponents/BasePfComponents/BaseDropdown';

const Header = ({ title, actions, breadcrumbs, showBreadcrumb, children, actionsOuiaId, labels }) => {

    return (
        <PageHeader>
            {showBreadcrumb && <Breadcrumb breadcrumbs={breadcrumbs} />}

            <Split hasGutter isWrappable>
                <SplitItem>
                    <PageHeaderTitle title={title} />
                </SplitItem>

                {[].concat(labels).map((item, index) => (
                    <SplitItem key={index}>
                        {item}
                    </SplitItem>
                ))}

                <SplitItem isFilled />

                {actions.length > 0 &&
                    <SplitItem>
                        <BaseDropdown dropdownItems={actions} position={'right'} ouiaId={actionsOuiaId}></BaseDropdown>
                    </SplitItem>
                }
            </Split>

            {children}
        </PageHeader>
    );
};

Header.defaultProps = {
    showBreadcrumb: true,
    actions: [],
    title: intl.formatMessage(messages.cvesHeader)
};

Header.propTypes = {
    breadcrumbs: propTypes.array,
    actions: propTypes.array,
    title: propTypes.any,
    showBreadcrumb: propTypes.bool,
    children: propTypes.any,
    actionsOuiaId: propTypes.string,
    labels: propTypes.oneOfType([propTypes.element, propTypes.arrayOf(propTypes.element)])
};

export default Header;
