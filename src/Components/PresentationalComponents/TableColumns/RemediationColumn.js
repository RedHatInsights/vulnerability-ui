import React, { Fragment } from 'react';
import PropType from 'prop-types';
import { AnsibleTowerIcon } from '@patternfly/react-icons';
import { Split, SplitItem, Tooltip } from '@patternfly/react-core';
import { FormattedMessage } from 'react-intl';
import messages from '../../../Messages';
import { OutlinedQuestionCircleIcon } from '@patternfly/react-icons';
import { createRHDBLink } from '../../../Helpers/CVEHelper';
import { useParams } from 'react-router-dom';

const RemediationColumn = ({ cve, fixable }) => {
    const { cve: cveName } = useParams();

    switch (fixable) {
        case 0: {
            return (
                <Fragment>
                    <FormattedMessage {...messages.notAvailable} />
                    <Tooltip
                        appendTo={document.querySelector('.vulnerability')}
                        content={
                            <Fragment>
                                <FormattedMessage {...messages.fixableTooltip} />
                                <br />
                                {
                                    createRHDBLink(
                                        cve ?? cveName,
                                        messages.rhCVEdb,
                                        { className: 'toolip-link--embeded' }
                                    )
                                }
                            </Fragment>
                        }
                    >
                        <OutlinedQuestionCircleIcon
                            className="pf-u-ml-xs"
                            color="var(--pf-global--Color--200)"
                        />
                    </Tooltip>
                </Fragment>
            );
        }

        case 1: {
            return (
                <FormattedMessage {...messages.manual} />
            );
        }

        case 2: {
            return (
                <Split>
                    <SplitItem>
                        <AnsibleTowerIcon className="pf-u-mr-xs" />
                    </SplitItem>
                    <SplitItem>
                        <FormattedMessage {...messages.playbook} />
                    </SplitItem>
                </Split>
            );
        }

        default: {
            return null;
        }
    }
};

RemediationColumn.propTypes = {
    cve: PropType.string,
    fixable: PropType.number.isRequired
};

export default RemediationColumn;
