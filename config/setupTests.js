import { configure, mount, render, shallow } from 'enzyme';
import Adapter from '@wojtekmaj/enzyme-adapter-react-17';
import React from 'react';
import 'babel-polyfill';
import fetch from 'unfetch';

configure({ adapter: new Adapter() });

global.shallow = shallow;
global.render = render;
global.mount = mount;
global.React = React;
global.fetch = fetch;

window.insights = {
    chrome: {
        getUserPermissions: () => Promise.resolve()
    },
    loadInventory: () => Promise.resolve({
        inventoryConnector: (args) => {
            const InventoryTable = () => <div>A mock passed!</div>;
            return ({ InventoryTable });
        },
        mergeWithEntities: () => { },
        mergeWithDetail: () => { }
    })
};

jest.useFakeTimers('modern').setSystemTime(new Date('2020-01-01').getTime());
