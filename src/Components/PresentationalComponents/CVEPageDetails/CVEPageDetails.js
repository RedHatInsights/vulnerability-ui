import { Card, CardBody, Grid, GridItem, Stack, StackItem } from '@patternfly/react-core';
import propTypes from 'prop-types';
import React from 'react';
import CVEPageDetailsTitle from '../CVEPageDetailsTitle/CVEPageDetailsTitle';
import CVEPageDetailsDescription from '../CVEPageDetailsDescription/CVEPageDetailsDescription';
import CVEPageDetailsSeverity from '../CVEPageDetailsSeverity/CVEPageDetailsSeverity';
import WithLoader from '../WithLoader/WithLoader';
import './CVEPageDetails.scss';

const CVEPageDetails = props => {
    return (
        <Card className="cve-overview-card">
            <CardBody>
                <Stack gutter="md">
                    <StackItem>
                        <WithLoader loading={props.data.isLoading}>
                            <CVEPageDetailsTitle title={props.data.data.synopsis} publish_date={props.data.data.public_date} />
                        </WithLoader>
                    </StackItem>
                    <StackItem>
                        <Grid>
                            <GridItem span={8}>
                                <WithLoader loading={props.data.isLoading}>
                                    <CVEPageDetailsDescription
                                        description={props.data.data.description}
                                        links={[props.data.data.rh_link, props.data.data.mitre_link]}
                                    />
                                </WithLoader>
                            </GridItem>
                            <GridItem span={1}>{}</GridItem>
                            <GridItem span={3}>
                                <WithLoader loading={props.data.isLoading}>
                                    <CVEPageDetailsSeverity
                                        impact={props.data.data.impact}
                                        cvss2_score={props.data.data.cvss2_score}
                                        cvss3_score={props.data.data.cvss3_score}
                                    />
                                </WithLoader>
                            </GridItem>
                        </Grid>
                    </StackItem>
                </Stack>
            </CardBody>
        </Card>
    );
};

CVEPageDetails.propTypes = {
    data: propTypes.object
};

export default CVEPageDetails;
