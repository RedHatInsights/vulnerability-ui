import { conditionalFilterType } from '@redhat-cloud-services/frontend-components/ConditionalFilter';
import { ADVISORY_AVAILABILITY_FILTER_OPTIONS } from '../../../../Helpers/constants';
import { intl } from '../../../../Utilities/IntlProvider';
import messages from '../../../../Messages';

const AdvisoryAvailabilityFilter = (apply, currentFilter = {}) => {
    let { advisory_available: currentValue } = currentFilter;

    const filterByAdvisoryAvailability = values => {
        apply({
            advisory_available: values.length > 0 ? values?.join(',') : undefined,
            page: 1
        });
    };

    return {
        label: intl.formatMessage(messages.advisory),
        type: conditionalFilterType.checkbox,
        key: 'advisory_available',
        filterValues: {
            onChange: (event, value) => {
                filterByAdvisoryAvailability(value);
            },
            items: ADVISORY_AVAILABILITY_FILTER_OPTIONS.map(({ label, value }) => ({ label, value })),
            value: currentValue?.split(',')
        }
    };
};

export default AdvisoryAvailabilityFilter;
