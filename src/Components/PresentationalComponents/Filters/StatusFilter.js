
import { conditionalFilterType } from '@redhat-cloud-services/frontend-components';
import { STATUS_OPTIONS } from '../../../Helpers/constants';

const statusFilter = (apply, currentFilter = {}) => {

    let { status_id: currentValue } = currentFilter;

    const filterByStatus = values => {
        apply({ status_id: (values.length > '0' && values.filter(value => value !== ',').join(',')) || '' });
    };

    return {
        label: 'Status',
        type: conditionalFilterType.checkbox,
        filterValues: {
            onChange: (event, value) => {
                filterByStatus(value);
            },
            items: STATUS_OPTIONS.map(item => ({ label: item.label, value: item.value })),
            value: (currentValue ? currentValue.split(',') : [])
        }
    };
};

export default statusFilter;
