import React, { useState } from 'react';
import PropTypes from 'prop-types';
import { useIntl } from 'react-intl';
import { CaretDownIcon } from '@patternfly/react-icons';
import messages from '../../../Messages';
import { Dropdown, DropdownList, MenuToggle } from '@patternfly/react-core';

const BaseDropdown = ({ dropdownItems, disabled, ...props }) => {
    const [isOpen, setIsOpen] = useState(false);
    const intl = useIntl();

    return (
        <Dropdown
            toggle={(toggleRef) => (
                <MenuToggle
                    ref={toggleRef}
                    data-testid="dropdown-toggle"
                    onClick={() => setIsOpen(!isOpen)}
                    isExpanded={isOpen}
                    toggleIndicator={CaretDownIcon}
                    isDisabled={disabled}
                    className="dropdown-toggle"
                >
                    {intl.formatMessage(messages.actions)}
                </MenuToggle>
            )}
            {...props}
            isOpen={isOpen}
        >
            <DropdownList>
                {dropdownItems}
            </DropdownList>
        </Dropdown>
    );
};

BaseDropdown.propTypes = {
    dropdownItems: PropTypes.array,
    disabled: PropTypes.bool
};

export default BaseDropdown;

