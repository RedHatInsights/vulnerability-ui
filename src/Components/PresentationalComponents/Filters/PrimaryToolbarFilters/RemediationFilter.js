
import { conditionalFilterType } from '@redhat-cloud-services/frontend-components/ConditionalFilter';
import { REMEDIATION_OPTIONS } from '../../../../Helpers/constants';
import { intl } from '../../../../Utilities/IntlProvider';
import messages from '../../../../Messages';

const remediationFilter = (apply, currentFilter = {}) => {
    let { remediation: currentValue } = currentFilter;

    const filterByRemediation = values => {
        apply({
            remediation: (values.length > '0' && values.filter(value => value !== ',').join(',')) || '',
            page: 1
        });
    };

    return {
        label: intl.formatMessage(messages.filterRemediation),
        type: conditionalFilterType.checkbox,
        urlParam: 'remediation',
        key: 'remediation',
        filterValues: {
            onChange: (event, value) => {
                filterByRemediation(value);
            },
            items: REMEDIATION_OPTIONS.map(item => ({ label: item.label, value: item.value })),
            value: (currentValue ? currentValue.split(',') : [])
        }
    };
};

export default remediationFilter;
