import ReducerRegistry from '../../../Utilities/ReducerRegistry';
import dashbarResponse from '../../../../cypress/fixtures/dashbar.json';
import announcementResponse from '../../../../cypress/fixtures/announcement.json';

import Dashbar from './Dashbar';
import { changeCveListParameters } from '../../../Store/Actions/Actions';

const store = ReducerRegistry.getStore();

beforeEach(() => {
    cy.intercept('GET', '**/api/vulnerability/v1/dashbar', dashbarResponse);
    cy.intercept('GET', '**/api/vulnerability/v1/announcement', announcementResponse);
    cy.mountWithContext(Dashbar);
});

describe('Dashbar', () => {
    it('exists and matches screenshot', () => {
        store.dispatch(changeCveListParameters({}));

        cy.get('#dashbar').matchImage();
        cy.get('#announcement').matchImage();
    });
});
