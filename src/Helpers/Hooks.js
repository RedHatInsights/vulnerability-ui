import { useEffect } from 'react';
import { useDispatch } from 'react-redux';
import {
    addNotification as addNotificationFEC,
    clearNotifications
} from '@redhat-cloud-services/frontend-components-notifications/redux';

export const useNotification = (config) => {
    const dispatch = useDispatch();

    const globalConfig = {
        variant: 'info',
        dismissable: true,
        ...config
    };

    useEffect(() => {
        return () => {
            dispatch(clearNotifications());
        };
    }, [dispatch]);

    const addNotification = ({ msg, ...config }) =>
        dispatch(
            addNotificationFEC({
                title: msg,
                ...globalConfig,
                ...config
            })
        );

    return addNotification;
};

