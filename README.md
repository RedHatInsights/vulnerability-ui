[![Build Status](https://travis-ci.com/RedHatInsights/vulnerability-ui.svg?branch=master)](https://app.travis-ci.com/github/RedHatInsights/vulnerability-ui)
[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release)
[![GitHub release](https://img.shields.io/github/release/RedHatInsights/vulnerability-ui.svg)](https://github.com/RedHatInsights/vulnerability-ui/releases/latest)
[![codecov](https://codecov.io/gh/RedHatInsights/vulnerability-ui/branch/master/graph/badge.svg)](https://codecov.io/gh/RedHatInsights/vulnerability-ui)

# Vulnerability UI

## First time setup
### Quick start
1. Make sure you have [`node`](https://nodejs.org/en/) and [`npm`](https://www.npmjs.com/) installed
2. Use https://github.com/RedHatInsights/insights-proxy/blob/master/scripts/patch-etc-hosts.sh to patch your `/etc/hosts`

### Comprehensive documentation
There is a [comprehensive quick start guide in the Storybook Documentation](https://github.com/RedHatInsights/insights-frontend-storybook/blob/master/src/docs/welcome/quickStart/DOC.md) to setting up an Insights environment.

## Running locally
1. install npm packages with `npm install`
2. run development server with `npm run start:proxy`

## Testing
[Jest](https://jestjs.io/) is used as the testing framework
1. ```npm run test``` - run all tests
2. ```npm run test -- testName``` - run tests for all components matching `testName`
3. ```npm run lint``` - run linter
4. ```npm run test:update``` - run all tests and update snapshots
5. ```npm run test:watch``` - run tests in watch mode

## Internationalization

### Translation keys
Translation keys are saved in [Messages.js](https://github.com/RedHatInsights/vulnerability-ui/blob/master/src/Messages.js). 

### Generating translation keys
Each time you add a new translation keys you need to run
- `npm run translations`

it will automatically generate the `json` files for all languages into [`locales/`](https://github.com/RedHatInsights/vulnerability-ui/tree/master/locales) folder based on the keys in the [Messages.js](https://github.com/RedHatInsights/vulnerability-ui/blob/master/src/Messages.js). 

### Using translated strings
There are two ways to use to inject translated strings. 

1. with `intl.formatMessage(messages.messageId)`
2. with `<FormattedMessage {...messages.messageId}/>`

## Deploying

Any push to the following branches will deploy to [vulnerability-ui-build](https://github.com/RedHatInsights/vulnerability-ui-build)

| Push to branch in this repo  | Updated branch in build repo  | Environment
| :-------------: |:-------------:     | :-------------:| 
| master          | qa-beta            | stage beta
| qa-stable       | qa-stable          | stage stable
| prod-beta       | prod-beta          | production beta
| prod-stable     | prod-stable        | production stable


## Design System
This project uses [Patternfly React](https://github.com/patternfly/patternfly-react)

## Insights Components
Insights Platform will deliver components and static assets through [npm](https://www.npmjs.com/package/@redhat-cloud-services/frontend-components). ESI tags are used to import the [chroming](https://github.com/RedHatInsights/insights-chrome) which takes care of the header, sidebar, and footer.

## Versioning
This project uses semantic versioning https://semver.org/. This process is automated by using [Semantic Release](https://github.com/semantic-release/semantic-release).
