import React from 'react';
import { render, screen } from '@testing-library/react';
import { BrowserRouter as Router } from 'react-router-dom';
import Header from './Header';
import '@testing-library/jest-dom';

describe('VulnerabilityHeader component', () => {
    it('should render with title Hello world', () => {
        const title = 'Hello world'
        render(<Header title={title} />);

        expect(screen.getByText(title)).toBeVisible();
    });

    it('should render default title', () => {
        render(<Header />);
        expect(screen.getByText('CVEs')).toBeVisible();
    });

    it('should not render Breadcrumb', () => {
        render(<Header showBreadcrumb={false} />);
        expect(screen.queryAllByTestId('PfBreadcrumb')).toHaveLength(0);
    });

    it('should render breadcrumb item with skeleton', () => {
        const breadcrumbs = [
            {
                title: 'First item',
                to: '#',
                isActive: true,
                isLoaded: false
            }
        ]

        render(
            <Router>
                <Header showBreadcrumb breadcrumbs={breadcrumbs} />
            </Router>
        );

        expect(screen.getByTestId('PfBreadcrumb')).toBeVisible();
        expect(screen.getAllByTestId('breadcrumb-skeleton')).toHaveLength(1);
    });
});
