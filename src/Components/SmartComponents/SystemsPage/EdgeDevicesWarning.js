import React, { useEffect, useState } from 'react';
import { useIntl } from 'react-intl';
import { Alert } from '@patternfly/react-core';
import { useGetSingleDevice } from '../../../Helpers/APIHelper';
import messages from '../../../Messages';

const EdgeDevicesWarning = () => {
    const intl = useIntl();
    const [isLoading, setLoading] = useState(true);
    const [edgeDeviceExist, setEdgeDeviceExist] = useState(false);
    const getEdgeDevice = useGetSingleDevice();
    useEffect(() => {
        getEdgeDevice().then(edgeDevice => {
            setEdgeDeviceExist(edgeDevice?.count === 1);
            setLoading(false);
        });
    }, []);

    return isLoading && !edgeDeviceExist
        ?
        null
        : <Alert
            variant="info"
            isInline
            style={{ marginBottom: '1.5rem' }}
            title={intl.formatMessage(messages.edgeWarning)}
        />;
};

export default EdgeDevicesWarning;
