import React, { useState, Fragment } from 'react';
import PropTypes from 'prop-types';
import { useSelector } from 'react-redux';

import {
    TextContent,
    Text,
    TextVariants,
    Card,
    CardBody,
    CardActions,
    CardHeader
} from '@patternfly/react-core';
import { ExclamationTriangleIcon, TimesIcon } from '@patternfly/react-icons';
import './popup.scss';

const PopUp = ({ body, title, page }) => {
    const [hidden, setHidden] = useState(false);

    const popupsStore = useSelector(
        ({ AppStore }) =>  AppStore.popup
    );

    const pop =  popupsStore?.[page];

    return  <Fragment>
        {
            !hidden && pop &&
            <Card className="popup">
                <CardHeader>
                    <TextContent>
                        <Text component={TextVariants.h3}>
                            <ExclamationTriangleIcon className="icon" color={'var(--pf-global--warning-color--100)'} />
                            {title}
                        </Text>
                    </TextContent>
                    <CardActions className="actions">
                        <TimesIcon onClick={() => setHidden(true)}/>
                    </CardActions>
                </CardHeader>
                <CardBody>{body}</CardBody>
            </Card>
        }
    </Fragment>;
};

PopUp.propTypes = {
    body: PropTypes.string,
    title: PropTypes.string,
    page: PropTypes.string
};

PopUp.defaultProps = {
    title: 'Tag and workload filtration temporarily unavailable',
    body: 'Tag and workload filtration is temporarily unavailable on this page. We\'re working to resolve this soon.'
};

export default PopUp;
