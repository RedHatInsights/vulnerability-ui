import React, { Fragment, useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { Main } from '@redhat-cloud-services/frontend-components';
import VulnerabilityHeader from '../VulnerabilityHeader/VulnerabilityHeader';
import { togglePopup } from '../../../Store/Actions/Actions';
import PopUp from '../../PresentationalComponents/PopUp/PopUp';
import CVEs from '../CVEs/CVEs';

const LandingPage = () => {
    const dispatch = useDispatch();

    const unsupported = useSelector(
        ({ CVEsStore }) =>  CVEsStore.unsupported
    );

    useEffect(() => {
        if (unsupported) {
            dispatch(togglePopup('landing', true));
        }
    }, [unsupported, dispatch]);
    return (
        <Fragment>
            <VulnerabilityHeader showBreadcrumb={false} />
            <Main>
                <CVEs/>
                <PopUp page="landing"/>
            </Main>
        </Fragment>
    );
};

export default LandingPage;
